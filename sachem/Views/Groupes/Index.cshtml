@using sachem.Models
@model PagedList.IPagedList<Groupe>

@{
    ViewBag.Title = Messages.Groupes;
}

<h2>@ViewBag.Title</h2>

@Html.ValidationSummary(true, "", new { @class = "text-danger" })

@using (Html.BeginForm("Index", "Groupes", FormMethod.Post, new { @class = "form-inline", role = "form" }))
{

    @Html.Partial("_RechercheGroupe")

    @TempData["Success"]

    if ((string)TempData["Questions"] != null)
    {
        @TempData["Questions"]
        <br />

            <tr>
                <td>
                    @Html.ActionLink(Messages.Oui, "AjouterEleve", new { idg = TempData["idg"] , ViewBag.page}) |
                    @Html.ActionLink(Messages.Non, "Index", new { idg = TempData["idg"]}) 
                </td>
            </tr>
    }

   <h4>@Messages.Recherche</h4>

    <div class="recherche">
        <div class="row">
            <div class="col-md-3">
                <div class="col-md-4 recherche-label">@Messages.Session</div>
                <div class="col-md-8 recherche-field">@Html.DropDownList("Sessions", null, Messages.Toutes, new { @class = "form-control" })</div>
            </div>
            <div class="col-md-4">
                <div class="col-md-3 recherche-label">@Messages.Enseignant</div>
                <div class="col-md-9 recherche-field">
                    @(ViewBag.Disabled == "" ? Html.DropDownList("Enseignants", null, Messages.Tous, new { @class = "form-control" }) : Html.DropDownList("Enseignants", null, new { disabled = ViewBag.Disabled, @class = "form-search" }))
                </div>
            </div>
            <div class="col-md-4">
                <div class="col-md-2 recherche-label">@Messages.Cours</div>
                <div class="col-md-10 recherche-field">@Html.DropDownList("Cours", null, Messages.Tous, new { @class = "form-control"})</div>
            </div>
            <div class="col-md-1">
                <input type="submit" value="@Messages.Rechercher" class="btn btn-default" />
            </div>
        </div>
    </div>
}

<div style="margin-top:5px;margin-bottom:10px;">@Html.ActionLink(Messages.GroupesAjouterTitre, "Create", null, null, new { @class = "btn btn-default" })</div>
    
<table class="table">
    <tr>
        <th class="col-sm-1">
            @Html.DisplayNameFor(model => model.FirstOrDefault().Session.NomSession)
        </th>
        <th class="col-sm-5">
            @Html.DisplayNameFor(model => model.FirstOrDefault().Cours.CodeNom)
        </th>
        <th class="col-sm-1">
            @Html.DisplayNameFor(model => model.FirstOrDefault().NoGroupe)
        </th>
        <th class="col-sm-2">
            @Html.DisplayNameFor(model => model.FirstOrDefault().Personne.NomPrenom)
        </th>
        <th class="col-sm-1">
            @Html.DisplayNameFor(model => model.FirstOrDefault().nbPersonneGroupe)
        </th>
        <th class="col-sm-2"></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Session.NomSession)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Cours.CodeNom)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.NoGroupe)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Personne.NomPrenom)
        </td>
        <td>
            @item.GroupeEtudiant.Count
        </td>
        <td>
            @Html.ActionLink(Messages.Modifier, "Edit", new {id = item.id_Groupe}) |
            @Html.ActionLink(Messages.Supprimer, "Delete", new {id = item.id_Groupe})
        </td>
    </tr>
}
@if (!Model.Any())
{
    <tr>
        <td colspan="6">@Messages.AucunGroupe</td>
    </tr>
}
</table>

@Html.Partial("_PageRecherche", Model)
