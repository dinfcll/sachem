<script src="~/Scripts/jquery-1.10.2.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $("#SelectSession").change(function () {
            var vSession = $('#SelectSession').val();

            $.ajax({
                type: 'POST',
                url:
                    @Html.Raw("\"/" + HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString() + "/ActualiseCoursddl\""),
                data: {
                    session: vSession
                },

                async: false,
                cache: false,
                dataType: "json",
                success: function (donnees) {

                    $("#SelectCours").empty();
                    $('#SelectCours').append($('<option>', {
                        value: 0,
                        text: 'Choisir'
                    }));

                    $.each(donnees, function (i, item) {
                        $('#SelectCours').append($('<option>', {
                            value: item.id_Cours,
                            text: item.CodeNom

                        }));
                    });

                }
            });

            var vCours = $('#SelectCours').val()

            $.ajax({
                type: 'POST',
                url: "/RechercheEtudiant/ActualiseGroupeddl",
                data: {
                    session : vSession,
                    cours: vCours },

                async: false,
                cache: false,
                dataType: "json",
                success: function (donnees) {

                    $("#SelectGroupe").empty();
                    $('#SelectGroupe').append($('<option>', {
                        value: 0,
                        text: 'Choisir'
                    }));

                    $.each(donnees, function (i, item) {
                        $('#SelectGroupe').append($('<option>', {
                            value: item.id_Groupe,
                            text: item.NoGroupe

                        }));
                    });

                }
            });
        });

        $("#SelectCours").change(function () {
            var vSession = $('#SelectSession').val();
            var vCours = $('#SelectCours').val()

            $.ajax({
                type: 'POST',
                url: "/RechercheEtudiant/ActualiseGroupeddl",
                data: {
                    session : vSession,
                    cours: vCours },

                async: false,
                cache: false,
                dataType: "json",
                success: function (donnees) {

                    $("#SelectGroupe").empty();
                    $('#SelectGroupe').append($('<option>', {
                        value: 0,
                        text: 'Choisir'
                    }));

                    $.each(donnees, function (i, item) {
                        $('#SelectGroupe').append($('<option>', {
                            value: item.id_Groupe,
                            text: item.NoGroupe

                        }));
                    });

                }
            });
        });




    });

</script>

<div class="form-inline">

    <h4>Recherche</h4>

    <div class="form-group">
        @*Les critères de recherches de la page, ceux-ci sont choisi par l'utilisateur et possèdent une valeur par défaut*@
        Matricule :
        @Html.Editor("Matricule")
    </div>
    <div class="form-group">
        &nbsp;<b><u>ou</u></b>&nbsp;
    </div>
    <div class="form-group">
        @*Les critères de recherches de la page, ceux-ci sont choisi par l'utilisateur et possèdent une valeur par défaut*@
        Session :
        @Html.DropDownList("SelectSession", null, "Choisir")
    </div>
    <div class="form-group">
        Cours :
        @Html.DropDownList("SelectCours", "Choisir")
    </div>
    <div class="form-group">
        Groupe :
        @Html.DropDownList("SelectGroupe", "Choisir")
    </div>

    @*Il n'existe pas de HtmlHelper pour créer un bouton submit, il faut donc le creer manuellement*@
    <input type="submit" value="Rechercher" class="btn-toolbar" />
</div>