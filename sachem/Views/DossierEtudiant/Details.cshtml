@model Tuple<sachem.Models.Inscription, IEnumerable<sachem.Models.CoursSuivi>, IEnumerable<sachem.Models.Inscription>>

@{
    ViewBag.Title = "Dossier de l'étudiant";
}
<style>#btn-input-field { height: 34px; width:34px; } #input-field { float: left;width: 245px; } #btn-input-field-icon{margin-left:-6px;font-size:150%;}</style>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">

<h2>@ViewBag.Title</h2>

@using (Html.BeginForm("Details", "DossierEtudiant", FormMethod.Post, new { @class = "form-inline", role = "form" }))
{
    @Html.AntiForgeryToken()
<div>
    <h4>Identification de l'étudiant</h4>
    <hr />
    <dl class="dl-horizontal">
        @Html.HiddenFor(model => model.Item1.Personne.id_Pers)
        @Html.HiddenFor(model => model.Item1.id_Inscription)
        <dt>
            @Html.DisplayNameFor(model => model.Item1.Personne.Matricule7)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Item1.Personne.Matricule7)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Item1.Personne.NomPrenom)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Item1.Personne.NomPrenom)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Item1.Personne.DateNais)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Item1.Personne.DateNais)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Item1.Personne.Courriel)
        </dt>

        <dd>
            @if (sachem.Models.SachemIdentite.ObtenirTypeUsager(Session) == sachem.Models.TypeUsagers.Tuteur
                || sachem.Models.SachemIdentite.ObtenirTypeUsager(Session) == sachem.Models.TypeUsagers.Eleve)
            {
                @Html.EditorFor(model => model.Item1.Personne.Courriel, new { htmlAttributes = new {
               @class = "form-control", @required="required", @id="input-field", @maxlength = "256" } })
                <button type="submit" id="btn-input-field" class="btn btn-default">
                    <i class="material-icons" id="btn-input-field-icon">build</i>
                </button>
                @Html.ValidationMessageFor(model => model.Item1.Personne.Courriel, "", new { @class = "text-danger" })
            }
            else
            {
                @Html.DisplayFor(model => model.Item1.Personne.Courriel)
            }
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Item1.Personne.Telephone)
        </dt>

        <dd>
            @if (sachem.Models.SachemIdentite.ObtenirTypeUsager(Session) == sachem.Models.TypeUsagers.Tuteur
                    || sachem.Models.SachemIdentite.ObtenirTypeUsager(Session) == sachem.Models.TypeUsagers.Eleve)
            {
                    @Html.EditorFor(model => model.Item1.Personne.Telephone, new { htmlAttributes = new {
                   @class = "form-control", @id="input-field", @required="required",
                   @placeholder = "(999) 999-9999", @minlength="10", @maxlength = "14",
                   @type = "tel", @Value = String.Format("{0:(###) ###-####}", Convert.ToInt64(Model.Item1.Personne.Telephone))}
                    })
                    <button type="submit" id="btn-input-field" class="btn btn-default">
                        <i class="material-icons" id="btn-input-field-icon">build</i>
                    </button>
                @Html.ValidationMessageFor(model => model.Item1.Personne.Telephone, "", new { @class = "text-danger" })
            }
            else
            {
                @(String.Format("{0:(###) ###-####}", Convert.ToInt64(Model.Item1.Personne.Telephone)))
            }
        </dd>
    </dl>

@if (sachem.Models.SachemIdentite.ObtenirTypeUsager(Session) == sachem.Models.TypeUsagers.Eleve || ViewBag.idTypeInsc == 1)
{
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Item1.BonEchange)
        </dt>
@if (sachem.Models.SachemIdentite.TypeListeProf.Contains(sachem.Models.SachemIdentite.ObtenirTypeUsager(Session)))
{
        <dd>
            @Html.CheckBoxFor(model => model.Item1.BonEchange.Value)
            Acheté
        </dd>
}
else
{
    if (Model.Item1.BonEchange.Value == true)
    {
        <dd>
            Acheté
        </dd>
    }
    else
    {
        <dd>
            Pas acheté
        </dd>
    }
}
    </dl>
}
        
    <div style="margin-top:10px;">@Html.ActionLink("Retourner à la recherche", "Index", null, null)</div>

    @Html.Partial("_CoursAnterieur", Model.Item2)

    @Html.Partial("_InscriptionSachem", Model.Item3)
</div>
}